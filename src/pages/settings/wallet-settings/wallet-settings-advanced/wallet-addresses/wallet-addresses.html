<ion-header>
  <ion-navbar>
    <ion-title>{{'Wallet Addresses' | translate}}</ion-title>
  </ion-navbar>
</ion-header>
<ion-content padding>
  <span translate>Each bitcoin wallet can generate billions of addresses from your 12-word backup. A new address is automatically generated and shown each time you receive a payment.</span>
  <a (click)="showInformation()" *ngIf="!showInfo" translate>Why?</a>
  <div *ngIf="showInfo">
    <span translate>It's a good idea to avoid reusing addresses - this both protects your privacy and keeps your bitcoins secure against hypothetical attacks by quantum computers.</span>
    <a (click)="showInformation()" translate>Hide</a>
  </div>

  <ion-list>
    <button ion-item (click)="scan()">
      <h2 translate>Scan addresses for funds</h2>
      <i class="icon bp-arrow-right"></i>      
    </button>

    <button ion-item *ngIf="viewAll" (click)="viewAllAddresses()">
      <h2 translate>View All Addresses</h2>
      <i class="icon bp-arrow-right"></i>      
    </button>

    <ion-item-divider (click)="newAddress()" color="light" translate>
      Unused Addresses
      <i class="icon ion-ios-plus-empty"></i>
    </ion-item-divider>

    <div *ngIf="loading" class="updating">
      <ion-spinner class="spinner-dark recent" icon="crescent"></ion-spinner>
      <span translate>Loading addresses...</span>
    </div>

    <div *ngIf="latestUnused && latestUnused[0]">
      <div *ngIf="gapReached">
        <h5 translate>Unused Addresses Limit</h5>
        <p><span translate>The maximum number of consecutive unused addresses (20) has been reached. When one of your unused addresses receives a payment, a new address will be generated and shown in your Receive tab.</span>&nbsp
          <a (click)="readMore()" *ngIf="!showMore" translate>Read more</a>
        </p>
        <p *ngIf="showMore"><span translate>The restore process will stop when 20 addresses are generated in a row which contain no funds. To safely generate more addresses, make a payment to one of the unused addresses which has already been generated.</span>&nbsp
          <a (click)="readMore()" translate>Read less</a>
        </p>
      </div>

      <ion-item *ngFor="let u of latestUnused" copy-to-clipboard="u.address">
        {{u.address}}
        <div>
          {{u.path}} {{u.createdOn * 1000 | amDateFormat:'MMMM Do YYYY, hh:mm a'}}
        </div>
      </ion-item>
    </div>

    <div *ngIf="latestWithBalance && latestWithBalance[0]">
      <ion-item-divider color="light" translate>
        Addresses With Balance
      </ion-item-divider>

      <ion-item class="item" *ngFor="let w of latestWithBalance" copy-to-clipboard="w.address">
        {{w.address}}
        <div class="addr-balance">{{w.balanceStr}}</div>
      </ion-item>
    </div>


    <div *ngIf="allUtxosNb">
      <ion-item-divider translate>
        Wallet Inputs
      </ion-item-divider>

      <ion-item>
        <span translate> Total wallet inputs </span>
        <div>
          {{allUtxosNb}} [{{allUtxosSum}}]
        </div>
      </ion-item>
      <ion-item>
        <span translate> Low amount inputs </span>
        <div>
          {{lowUtxosNb}} [{{ lowUtxosSum }}]
        </div>
      </ion-item>

      <ion-item>
        <span translate> Approximate Bitcoin network fee to transfer wallet's balance (with normal priority) </span>
        <div>
          {{minFeePer}} [{{minFee}}]
        </div>
      </ion-item>

    </div>
  </ion-list>
</ion-content>