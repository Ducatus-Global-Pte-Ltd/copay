<ion-header>

  <ion-navbar>
    <ion-title *ngIf="wallet">{{ wallet.name }}</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <div *ngIf="wallet" [hidden]="wallet.notAuthorized">
    <div class="list text-center">
      <div class="item item-heading item-text-wrap" translate>
        Share this invitation with your copayers
      </div>
      <div class="item text-center">
        <div copy-to-clipboard="{{ secret }}">
          <qr-code [level]="L" [size]="220" [foreground]="'#334'" [value]="secret" copy-to-clipboard="{{ secret }}"></qr-code>
          <div [hidden]="secret" style="position:relative; top:-226px; height:0px">
            <div style="height:220px; width:220px; margin:auto; background: white">
              <ion-spinner class="spinner-dark" icon="lines"></ion-spinner>
            </div>
          </div>
          <div class="copayers-secret">
            {{secret || ('Loading...'|translate)}}
          </div>
        </div>
        <button *ngIf="secret" class="button-cancel" (click)="showDeletePopup()">
            <span translate>Cancel invitation</span>
          </button>
      </div>
    </div>

    <div [hidden]="!secret">

      <div class="list card">
        <div class="item item-heading">
          <span class="text-gray right">
              [ <span translate>{{wallet.m}}-of-{{wallet.n}}</span> ]
          </span>
          <span translate>Waiting for copayers</span>
        </div>
        <div>
          <div class="item item-icon-left" *ngFor="let copayer of copayers">
            <span [hidden]="copayer.id != wallet.copayerId">
                <i class="icon ion-checkmark"></i>
                {{'Me'|translate}}
              </span>
            <span [hidden]="copayer.id == wallet.copayerId">
                <i class="icon ion-checkmark"></i>
                {{copayer.name}}
              </span>
          </div>
        </div>
        <div *ngIf="!wallet.isComplete()" class="item item-icon-left">
          <i class="icon ion-loop"></i> {{'Waiting...'|translate}}
        </div>
      </div>

      <div class="m30v text-center" [hidden]="!wallet.notAuthorized">
        <h1 translate>Wallet incomplete and broken</h1>
        <h4 translate>Delete it and create a new one</h4>
      </div>
    </div>
  </div>
</ion-content>